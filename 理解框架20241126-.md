##### 多线程模型 VS nginx多进程模型
| 属性 | 多线程模型 | Nginx多进程模型 |
| --- | --- | --- |
| 架构 | 单进程、多线程 | 多进程 |
| 数据共享 | 多线程内存共享 | 内存不共享 |
| 稳定性 | 单线程崩溃会影响整个进程 | 进程独立稳定 |
| 切换开销 | 小 | 大 |
| 锁同步问题 | 需要锁（互斥、读写锁）的同步机制 | 不需要，但也需要避免同步问题 |
| 使用场景 | 适合计算密集型或者资源有限 | 适合高并发，低延迟的web服务 |


###### 进程之间的数据交换需要通过IPC 进程间的通信 Inter-Process Communication  
1. [IPC inter-process communication](https://www.yuque.com/abaikki/rmny8m/qcyyahzdgt1sb57z)

###### 多进程和多线程怎么选，有什么区别？
| 属性 | 多进程 | 多线程 |
| --- | --- | --- |
| 优点 | （进程）（崩溃）隔离，并行，（内存）独立 | 轻量，天然共享内存（需要锁），适合I/O密集型 |
| 缺点 | 开销大（创建销毁进程，IPC通信），进程独占内存空间 | 资源竞争（必须使用同步机制互斥或者读写锁） |
| 使用场景 | CPU密集型<br/>高隔离性系统（任务之间需要较高隔离性，如分布式计算）<br/>高可用性系统（任务之间不能因为一个坏了相互影响） | I/O密集型（因为线程之间切换的消耗比较小，如果是IO密集型，那么在等待IO操作的时候，多线程是非常合适的，可以通过切换线程来提高效率）<br/>共享数据场景 |
| 实例 | 多进程的web服务器：Nginx<br/>科学计算 | 多线程的web服务器：apache<br/>文件处理<br/>图像处理 |
| 并发性 | 多核CPU实现并行 | 通常是并发 |
| 同步和通信 | IPC | 由于内存共享，通信简单，但需要同步机制 |
|  |  |  |


+ **选择多进程**：
+ 如果您需要处理**CPU密集型**任务，并且希望充分利用多核CPU，**多进程**是更好的选择。
+ 如果任务之间需要**高隔离性**，并且崩溃可能会影响整个系统的稳定性，使用**多进程**会更加安全。
+ 适用于处理**大规模并行计算**，如科学计算、视频编解码等。
+ **选择多线程**：
+ 如果您的应用程序是**I/O密集型**，需要频繁的I/O操作（如Web服务、文件处理），**多线程**能够有效提高并发性能。
+ 如果任务间需要共享数据，且共享的数据量较大，使用**多线程**会更高效。
+ 适用于**低开销**的任务调度，如UI响应、网络请求等。

###### 并行和并发
| 属性 | 并行 | 并发 |
| --- | --- | --- |
| ABC任务执行 | 假如有3核，可同时执行 | 单核交替执行 |
| 关系 | 并发是并行的基础 | 并发不一定并行 |
| 两者不冲突 |  一个系统可以在多个线程中并发处理I/O任务，而每个线程内部又可以通过并行计算来加速复杂的运算   | |
| 如何结合使用？ | **并行加速计算任务**：在每个并发任务内部，可能会有一些计算密集型的操作。比如，处理请求时可能需要进行一些复杂的数学计算或数据分析。在这种情况下，可以通过**并行**计算来加速这些任务的执行。例如，一个处理图像的线程可以将图像分割成多个区域，并行处理每个区域，从而加速图像的处理   | **并发处理I/O任务**：在一个系统中，可能有多个任务需要等待外部资源（如文件读取、数据库查询、网络请求等）。这些任务可以并发执行，即在等待资源的过程中，不会阻塞其他任务的执行，系统可以有效地利用CPU时间。例如，一个Web服务器可以并发处理多个客户端的请求，即使某些请求正在等待I/O操作（如数据库访问或文件读写），也不会阻塞其他请求的处理。 |


###### C++或者其他语言，多线程实现并行计算。（没怎么明白）
并行计算的方式总结

+ **多线程 (Multithreading)**：利用多核 CPU 创建多个线程执行独立的任务。
+ **线程池 (Thread Pool)**：通过线程池管理多个线程，减少频繁创建销毁线程的开销。
+ **数据并行 (Data Parallelism)**：将数据分成多个部分并行处理，适用于相同操作处理大量数据。
+ **任务并行 (Task Parallelism)**：将程序分解为多个并行执行的任务，适用于处理不同类型的任务。
+ **GPU 并行计算 (GPU Parallelism)**：利用 GPU 的计算核心并行执行任务，适合计算密集型工作负载。
+ **MapReduce**：通过 Map 和 Reduce 阶段将任务分解并行执行，适用于大数据处理。

何时选择哪种方式

+ **I/O 密集型任务**：使用多线程（或线程池）可以提高响应性，不会因等待 I/O 操作而阻塞其他任务。
+ **计算密集型任务**：可以使用数据并行或 GPU 并行计算来加速计算，尤其是当数据量很大时。
+ **分布式系统**：当任务无法在单机上完成时，可以考虑使用 MapReduce 模式或将计算任务分布到多个节点上。
+ **多个独立任务**：使用任务并行，通过线程池或多线程管理多个不同任务。

